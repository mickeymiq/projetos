#include <stdio.h>
#include <stdlib.h>
#include <time.h>

struct Jogador
{
    char nome[50];
    char nome1[30];
    char nome2[30];
    int placar1;
    int placar2;
};

void gravaRecord(FILE *arq, struct Jogador j)
{
    fprintf(arq, " %s-%dx%d-%s", j.nome1, j.placar1, j.placar2, j.nome2);
}

void inicio()
{
    system("cls");
    printf("\n\t__________________________________________________________\n");
    printf("\t__________________________________________________________\n");
    printf("\t__________________________________________________________\n");
    printf("\t__________________                    ____________________\n");
    printf("\t__________________   oxoxoxoxoxoxox   ____________________\n");
    printf("\t__________________   JOGO  DE  DAMA   ____________________\n");
    printf("\t__________________   xoxoxoxoxoxoxo   ____________________\n");
    printf("\t__________________________________________________________\n");
    printf("\t__________________________________________________________\n");
    printf("\t__________________________________________________________\n");
    printf("\tEscolha uma das opcoes abaixo\n\n");
    printf("\t 1 Jogar.\n\t 2 Ajuda.\n\t 3 Placar.\n\t 4 Sair.\n\n");
    return ;
}

void opcao2()
{
    system("cls");
    printf("\n\t_____________________________O QUE E O JOGO?_______________________________");
    printf("\n\t O jogo de Damas e representado por um Tabuleiro dividido em 64 quadrados ...\n");
    printf("\n\t_____________________________  O OBJETIVO  _______________________________");
    printf("\n\n\t Quem comer o maior numero de pecas possiveis durante 3 minutos e o vencedor!\n");
    printf("\n\t_____________________________  COMO JOGAR?  _______________________________");
    printf("\n\n Digite a linha e em seguida a coluna com os numero de linha e coluna como coordenadas [x,y]!\n");
    printf("\n\t\t As coordenadas [X,Y] devem ser digitadas com numeros inteiros!\n");
    printf("\n\t Se voce escolher jogar no tempo digite o tempo que deseja jogar em minutos!\n");
    printf("\t____________________________________________________________________________\n\n");
    system("pause");
    return;
}

void opcao4()
{
    system("cls");
    printf("\n\n\n\n\t\t\t  FIM DO JOGO!!!\n\n\n\n\n");
    system("pause");
    return;
}

void min(int m1)
{
    system("cls");
    printf("\n\t\t..........PASSARAM %d MINUTOS FIM DO JOGO...........\n\n\n",m1);
    system("pause");
    return;
}

void tabuleiro(char casas[8][8])
{
    system("cls");
    printf("\n");
    printf("\t\t   JOGO DE DAMAS");
    printf("\n");
    printf("\t   -------------------------------");
    printf("\n");
    printf("\t1-| %c | %c | %c | %c | %c | %c | %c | %c |", casas[0][0],casas[0][1],casas[0][2],casas[0][3],casas[0][4],casas[0][5],casas[0][6],casas[0][7]);
    printf("\n");
    printf("\t   -------------------------------");
    printf("\n");
    printf("\t2-| %c | %c | %c | %c | %c | %c | %c | %c |", casas[1][0],casas[1][1],casas[1][2],casas[1][3],casas[1][4],casas[1][5],casas[1][6],casas[1][7]);
    printf("\n");
    printf("\t   -------------------------------");
    printf("\n");
    printf("\t3-| %c | %c | %c | %c | %c | %c | %c | %c |", casas[2][0],casas[2][1],casas[2][2],casas[2][3],casas[2][4],casas[2][5],casas[2][6],casas[2][7]);
    printf("\n");
    printf("\t   -------------------------------");
    printf("\n");
    printf("\t4-| %c | %c | %c | %c | %c | %c | %c | %c |", casas[3][0],casas[3][1],casas[3][2],casas[3][3],casas[3][4],casas[3][5],casas[3][6],casas[3][7]);
    printf("\n");
    printf("\t   -------------------------------");
    printf("\n");
    printf("\t5-| %c | %c | %c | %c | %c | %c | %c | %c |", casas[4][0],casas[4][1],casas[4][2],casas[4][3],casas[4][4],casas[4][5],casas[4][6],casas[4][7]);
    printf("\n");
    printf("\t   -------------------------------");
    printf("\n");
    printf("\t6-| %c | %c | %c | %c | %c | %c | %c | %c |", casas[5][0],casas[5][1],casas[5][2],casas[5][3],casas[5][4],casas[5][5],casas[5][6],casas[5][7]);
    printf("\n");
    printf("\t   -------------------------------");
    printf("\n");
    printf("\t7-| %c | %c | %c | %c | %c | %c | %c | %c |", casas[6][0],casas[6][1],casas[6][2],casas[6][3],casas[6][4],casas[6][5],casas[6][6],casas[6][7]);
    printf("\n");
    printf("\t   -------------------------------");
    printf("\n");
    printf("\t8-| %c | %c | %c | %c | %c | %c | %c | %c |", casas[7][0],casas[7][1],casas[7][2],casas[7][3],casas[7][4],casas[7][5],casas[7][6],casas[7][7]);
    printf("\n");
    printf("\t----------------------------------");
    printf("\n");
    printf("\t  | 1 | 2 | 3 | 4 | 5 | 6 | 7 | 8 |");
}

int contar(char m[8][8],char ch)
{
    int i, j;
    int vezes=0;
    for(i=0; i<8; i++)
    {
        for(j=0; j<8; j++)
        {
            if(m[i][j] == ch)
            {
                vezes++;
            }
        }
    }
    return vezes;
}

void inicializar(char t[8][8])
{
    int i, j;

    for(i=0; i<8; i++)///limpando o tabuleiro
    {
        for(j=0; j<8; j++)
        {
            t[i][j]=' ';
        }
    }
    for(i=0; i<8; i++)///inserindo as pecas b
    {
        for(j=5; j<8; j++)
        {
            if((i%2==0 && j%2==0) || (i%2==1 && j%2==1))
            {
                t[i][j]='o';
            }
        }
    }
    for(i=0; i<8; i++)///inserindo as pecas p
    {
        for(j=0; j<3; j++)
        {
            if((i%2==0 && j%2==0) || (i%2==1 && j%2==1))
            {
                t[i][j]='x';
            }
        }
    }
    return;
}

int numero()
{
    int n;
    srand(time(NULL));
    n=rand()%100;
    return n;
}

int main()
{
    char t[8][8];
    char peca, play;
    int l, c, l1, c1;
    int vez;
    int m1;
    int pretos, brancos;
    int op;
    int fim;
    do
    {
        inicio();
        scanf("%d",&op);
        if(op==1)
        {
            system("cls");
            printf("\n\n\n\n\t  Deseja iniciar com pecas O ou X?[O-X]\n\n");
            scanf("%s", &peca);
            struct Jogador j;
            FILE *arq = fopen("arq.txt","a");
            if(arq == NULL)
            {
                printf("erro ao abrir arquivo");
                system("pause");
            }
            printf("\nDigite o nome do jogador X: ");
            scanf("%s",&j.nome1);
            printf("\nDigite o nome do jogador O: ");
            scanf("%s",&j.nome2);
            if(peca=='x')
            {
                system("cls");
                printf("\n\n\tA PECA 'X' INICIA O JOGO\n");
                system("pause");
                vez=0;
            }
            else if(peca=='o')
            {
                system("cls");
                printf("\n\n\tA PECA 'O' INICIA O JOGO\n");
                system("pause");
                vez=1;
            }
            else
            {
                system("cls");
                printf("\n\n\n\tO JOGO INICIA COM UMA PECA ALEATORIA\n\n");
                system("pause");
                vez=numero();
            }
            system("cls");
            printf("\n\n\n\n\t  Deseja jogar com tempo?[S-N]\n\n");
            scanf("%s", &play);
            if(play=='s')
            {
                system("cls");
                printf("\n\n\n\n\t  Digite o tempo em minutos:\n\n");
                scanf("%d", &m1);
                int ms = m1*60*1000;
                inicializar(t);
                tabuleiro(t);
                do
                {
                    clock_t start_time = clock();
                    int m=(start_time+ms-clock())/1000;
                    do
                    {
                        pretos = contar(t,'x');
                        brancos = contar(t,'o');
                        if(vez%2==0)///jogadas do jogador x
                        {
                            if(pretos==0)
                            {
                                system("cls");
                                printf("\n\tVencedor O\n");
                                system("pause");
                                vez--;
                            }
                            else
                            {
                                printf("\nVEZ DO JOGADOR X! %dx%d", contar(t,'x'), contar(t,'o'));
                                m=(start_time+ms-clock())/1000;
                                printf(" tempo restante %d:%.2d min",m/60, m%60);
                                printf("\ndigite as coordenadas da peca escolhida");
                                printf("\ndigite a linha: ");
                                scanf("%d", &l);
                                printf("digite a coluna: ");
                                scanf("%d", &c);
                                l--;
                                c--;
                            }
                            if( l<0 || c<0 || l>7 || c>7 )
                            {
                                printf("\nMovimento fora do tabuleiro!!\n");
                                system("pause");
                            }
                            else if(t[l][c]==' ')
                            {
                                printf("\nPosicao vazia!!\n");
                                system("pause");
                            }
                            else
                            {
                                if(t[l][c]== 'o')
                                {
                                    printf("\nSo pode usar pecas x!!\n");
                                    system("pause");
                                }
                                else
                                {
                                    printf("\ndigite as coordenadas de onde deseja jogar");
                                    printf("\ndigite a linha: ");
                                    scanf("%d", &l1);
                                    printf("digite a coluna: ");
                                    scanf("%d", &c1);
                                    l1--;
                                    c1--;
                                    if( l1<0 || c1<0 || l1>7 || c1>7 )
                                    {
                                        printf("\nMovimento fora do tabuleiro!!\n");
                                        system("pause");
                                    }
                                    else
                                    {
                                        if(t[l1][c1]==' ')
                                        {
                                            if(l1==l-1 && c1==c+1)///movimento
                                            {
                                                t[l][c]=' ';
                                                t[l1][c1]='x';
                                                vez++;
                                            }
                                            else if(l1==l+1 && c1==c+1)///movimento
                                            {
                                                t[l][c]=' ';
                                                t[l1][c1]='x';
                                                vez++;
                                            }
                                            else if(l1==l-2 && c1==c+2)///captura
                                            {
                                                if(t[l-1][c+1]=='o' && t[l-2][c+2]==' ')
                                                {
                                                    t[l-1][c+1]=' ';
                                                    t[l1][c1]='x';
                                                    t[l][c]=' ';
                                                    vez++;
                                                }
                                                else
                                                {
                                                    printf("\nMovimento invalido!!\n");
                                                    system("pause");
                                                }
                                            }
                                            else if(l1==l-2 && c1==c-2)///captura
                                            {
                                                if(t[l-1][c-1]=='o' && t[l-2][c-2]==' ')
                                                {
                                                    t[l1][c1]='x';
                                                    t[l][c]=' ';
                                                    t[l-1][c-1]=' ';
                                                    vez++;
                                                }
                                                else
                                                {
                                                    printf("\nMovimento invalido!!\n");
                                                    system("pause");
                                                }
                                            }
                                            else if(l1==l+2 && c1==c+2)///captura
                                            {
                                                if(t[l+1][c+1]=='o' && t[l+2][c+2]==' ')
                                                {
                                                    t[l1][c1]='x';
                                                    t[l][c]=' ';
                                                    t[l+1][c+1]=' ';
                                                    vez++;
                                                }
                                                else
                                                {
                                                    printf("\nMovimento invalido!!\n");
                                                    system("pause");
                                                }
                                            }
                                            else if(l1==l+2 && c1==c-2)///captura
                                            {
                                                if(t[l+1][c-1]=='o' && t[l+2][c-2]==' ')
                                                {
                                                    t[l1][c1]='x';
                                                    t[l][c]=' ';
                                                    t[l+1][c-1]=' ';
                                                    vez++;
                                                }
                                            }
                                            else
                                            {
                                                printf("\nJogada invalida!!\n");
                                                system("pause");
                                            }
                                        }
                                        else
                                        {
                                            printf("\nCasa ja preenchida!!\n");
                                            system("pause");
                                        }
                                    }
                                }
                            }
                        }
                        else///jogadas do jogador o
                        {
                            if(brancos==0)
                            {
                                system("cls");
                                printf("\nVencedor X\n");
                                system("pause");
                                vez--;
                            }
                            else
                            {
                                printf("\nVEZ DO JOGADOR O! %dx%d", contar(t,'x'), contar(t,'o'));
                                m=(start_time+ms-clock())/1000;
                                printf(" tempo restante %d:%.2d min",m/60, m%60);
                                printf("\ndigite as coordenadas da peca escolhida");
                                printf("\ndigite a linha: ");
                                scanf("%d", &l);
                                printf("digite a coluna: ");
                                scanf("%d", &c);
                                l--;
                                c--;
                            }
                            if( l<0 || c<0 || l>7 || c>7 )
                            {
                                printf("\nMovimento fora do tabuleiro!!\n");
                                system("pause");
                            }
                            else if(t[l][c]==' ')
                            {
                                printf("\nPosicao vazia!!\n");
                                system("pause");
                            }
                            else
                            {
                                if(t[l][c]=='x')
                                {
                                    printf("\nSo pode usar pecas o!!\n");
                                    system("pause");
                                }
                                else
                                {
                                    printf("\ndigite as coordenadas de onde deseja jogar");
                                    printf("\ndigite a linha: ");
                                    scanf("%d", &l1);
                                    printf("digite a coluna: ");
                                    scanf("%d", &c1);
                                    l1--;
                                    c1--;
                                    if( l1<0 || c1<0 || l1>7 || c1>7 )
                                    {
                                        printf("\nMovimento fora do tabuleiro!!\n");
                                        system("pause");
                                    }
                                    else
                                    {
                                        if(t[l1][c1]==' ')
                                        {
                                            if(l1==l+1 && c1==c-1)///movimentacao
                                            {
                                                t[l][c]=' ';
                                                t[l1][c1]='o';
                                                vez++;
                                            }
                                            else if(l1==l-1 && c1==c-1)///movimentacao
                                            {
                                                t[l][c]=' ';
                                                t[l1][c1]='o';
                                                vez++;
                                            }
                                            else if(l1==l-2 && c1==c+2)///captura
                                            {
                                                if(t[l-1][c+1]=='x' && t[l-2][c+2]==' ')
                                                {
                                                    t[l-1][c+1]=' ';
                                                    t[l1][c1]='o';
                                                    t[l][c]=' ';
                                                    vez++;
                                                }
                                                else
                                                {
                                                    printf("\nMovimento invalido!!\n");
                                                    system("pause");
                                                }
                                            }
                                            else if(l1==l-2 && c1==c-2)///captura
                                            {
                                                if(t[l-1][c-1]=='x' && t[l-2][c-2]==' ')
                                                {
                                                    t[l1][c1]='o';
                                                    t[l][c]=' ';
                                                    t[l-1][c-1]=' ';
                                                    vez++;
                                                }
                                                else
                                                {
                                                    printf("\nMovimento invalido!!\n");
                                                    system("pause");
                                                }
                                            }
                                            else if(l1==l+2 && c1==c+2)///captura
                                            {
                                                if(t[l+1][c+1]=='x' && t[l+2][c+2]==' ')
                                                {
                                                    t[l1][c1]='o';
                                                    t[l][c]=' ';
                                                    t[l+1][c+1]=' ';
                                                    vez++;
                                                }
                                                else
                                                {
                                                    printf("\nMovimento invalido!!\n");
                                                    system("pause");
                                                }
                                            }
                                            else if(l1==l+2 && c1==c-2)///captura
                                            {
                                                if(t[l+1][c-1]=='x' && t[l+2][c-2]==' ')
                                                {
                                                    t[l1][c1]='o';
                                                    t[l][c]=' ';
                                                    t[l+1][c-1]=' ';
                                                    vez++;
                                                }
                                                else
                                                {
                                                    printf("\nMovimento invalido!!\n");
                                                    system("pause");
                                                }
                                            }
                                            else
                                            {
                                                printf("\nJogada invalida!!\n");
                                                system("pause");
                                            }
                                        }
                                        else
                                        {
                                            printf("\nCasa ja preenchida!!\n");
                                            system("pause");
                                        }
                                    }
                                }
                            }
                        }
                        tabuleiro(t);
                    }
                    while(clock() < start_time + ms && contar(t,'x')!=0 && contar(t,'o')!=0);
                    if(clock() >= start_time+ms)
                    {
                        min(m1);
                        fim=1;
                    }
                    else if(contar(t,'x')==0)
                    {
                        fim=1;
                    }
                    else if(contar(t,'o')==0)
                    {
                        fim=1;
                    }
                }
                while(fim!=1);
                if(contar(t,'o')>contar(t,'x'))///o vence
                {
                    system("cls");
                    printf("\n\t\t..........GANHADOR O %dx%d...........\n\n\n", contar(t,'o'), contar(t,'x'));
                    system("pause");
                }
                else if(contar(t,'x')>contar(t,'o'))///x vence
                {
                    system("cls");
                    printf("\n\t\t..........GANHADOR X %dx%d...........\n\n\n", contar(t,'x'), contar(t,'x'));
                    system("pause");
                }
                else if(contar(t,'x')==contar(t,'o'))///empate
                {
                    system("cls");
                    printf("\n\t\t..........EMPATE!!! %dx%d...........\n\n\n", contar(t,'x'), contar(t,'o'));
                    system("pause");
                }
                j.placar1=contar(t,'x');
                j.placar2=contar(t,'o');
                gravaRecord(arq,j);
                fclose(arq);
            }
            else if(play=='n')
            {
                inicializar(t);
                tabuleiro(t);
                do
                {
                    do
                    {
                        pretos = contar(t,'x');
                        brancos = contar(t,'o');
                        if(vez%2==0)///jogadas do jogador x
                        {
                            if(pretos==0)
                            {
                                system("cls");
                                printf("\n\tVencedor O\n");
                                system("pause");
                                vez--;
                            }
                            else
                            {
                                printf("\nVEZ DO JOGADOR X! %dx%d", contar(t,'x'), contar(t,'o'));
                                printf("\ndigite as coordenadas da peca escolhida");
                                printf("\ndigite a linha: ");
                                scanf("%d", &l);
                                printf("digite a coluna: ");
                                scanf("%d", &c);
                                l--;
                                c--;
                            }
                            if( l<0 || c<0 || l>7 || c>7 )
                            {
                                printf("\nMovimento fora do tabuleiro!!\n");
                                system("pause");
                            }
                            else if(t[l][c]==' ')
                            {
                                printf("\nPosicao vazia!!\n");
                                system("pause");
                            }
                            else
                            {
                                if(t[l][c]== 'o')
                                {
                                    printf("\nSo pode usar pecas x!!\n");
                                    system("pause");
                                }
                                else
                                {
                                    printf("\ndigite as coordenadas de onde deseja jogar");
                                    printf("\ndigite a linha: ");
                                    scanf("%d", &l1);
                                    printf("digite a coluna: ");
                                    scanf("%d", &c1);
                                    l1--;
                                    c1--;
                                    if( l1<0 || c1<0 || l1>7 || c1>7 )
                                    {
                                        printf("\nMovimento fora do tabuleiro!!\n");
                                        system("pause");
                                    }
                                    else
                                    {
                                        if(t[l1][c1]==' ')
                                        {
                                            if(l1==l-1 && c1==c+1)///movimento
                                            {
                                                t[l][c]=' ';
                                                t[l1][c1]='x';
                                                vez++;
                                            }
                                            else if(l1==l+1 && c1==c+1)///movimento
                                            {
                                                t[l][c]=' ';
                                                t[l1][c1]='x';
                                                vez++;
                                            }
                                            else if(l1==l-2 && c1==c+2)///captura
                                            {
                                                if(t[l-1][c+1]=='o' && t[l-2][c+2]==' ')
                                                {
                                                    t[l-1][c+1]=' ';
                                                    t[l1][c1]='x';
                                                    t[l][c]=' ';
                                                    vez++;
                                                }
                                                else
                                                {
                                                    printf("\nMovimento invalido!!\n");
                                                    system("pause");
                                                }
                                            }
                                            else if(l1==l-2 && c1==c-2)///captura
                                            {
                                                if(t[l-1][c-1]=='o' && t[l-2][c-2]==' ')
                                                {
                                                    t[l1][c1]='x';
                                                    t[l][c]=' ';
                                                    t[l-1][c-1]=' ';
                                                    vez++;
                                                }
                                                else
                                                {
                                                    printf("\nMovimento invalido!!\n");
                                                    system("pause");
                                                }
                                            }
                                            else if(l1==l+2 && c1==c+2)///captura
                                            {
                                                if(t[l+1][c+1]=='o' && t[l+2][c+2]==' ')
                                                {
                                                    t[l1][c1]='x';
                                                    t[l][c]=' ';
                                                    t[l+1][c+1]=' ';
                                                    vez++;
                                                }
                                                else
                                                {
                                                    printf("\nMovimento invalido!!\n");
                                                    system("pause");
                                                }
                                            }
                                            else if(l1==l+2 && c1==c-2)///captura
                                            {
                                                if(t[l+1][c-1]=='o' && t[l+2][c-2]==' ')
                                                {
                                                    t[l1][c1]='x';
                                                    t[l][c]=' ';
                                                    t[l+1][c-1]=' ';
                                                    vez++;
                                                }
                                            }
                                            else
                                            {
                                                printf("\nJogada invalida!!\n");
                                                system("pause");
                                            }
                                        }
                                        else
                                        {
                                            printf("\nCasa ja preenchida!!\n");
                                            system("pause");
                                        }
                                    }
                                }
                            }
                        }
                        else///jogadas do jogador o
                        {
                            if(brancos==0)
                            {
                                system("cls");
                                printf("\nVencedor X\n");
                                system("pause");
                                vez--;
                            }
                            else
                            {
                                printf("\nVEZ DO JOGADOR O! %dx%d", contar(t,'x'), contar(t,'o'));
                                printf("\ndigite as coordenadas da peca escolhida");
                                printf("\ndigite a linha: ");
                                scanf("%d", &l);
                                printf("digite a coluna: ");
                                scanf("%d", &c);
                                l--;
                                c--;
                            }
                            if( l<0 || c<0 || l>7 || c>7 )
                            {
                                printf("\nMovimento fora do tabuleiro!!\n");
                                system("pause");
                            }
                            else if(t[l][c]==' ')
                            {
                                printf("\nPosicao vazia!!\n");
                                system("pause");
                            }
                            else
                            {
                                if(t[l][c]=='x')
                                {
                                    printf("\nSo pode usar pecas o!!\n");
                                    system("pause");
                                }
                                else
                                {
                                    printf("\ndigite as coordenadas de onde deseja jogar");
                                    printf("\ndigite a linha: ");
                                    scanf("%d", &l1);
                                    printf("digite a coluna: ");
                                    scanf("%d", &c1);
                                    l1--;
                                    c1--;
                                    if( l1<0 || c1<0 || l1>7 || c1>7 )
                                    {
                                        printf("\nMovimento fora do tabuleiro!!\n");
                                        system("pause");
                                    }
                                    else
                                    {
                                        if(t[l1][c1]==' ')
                                        {
                                            if(l1==l+1 && c1==c-1)///movimentacao
                                            {
                                                t[l][c]=' ';
                                                t[l1][c1]='o';
                                                vez++;
                                            }
                                            else if(l1==l-1 && c1==c-1)///movimentacao
                                            {
                                                t[l][c]=' ';
                                                t[l1][c1]='o';
                                                vez++;
                                            }
                                            else if(l1==l-2 && c1==c+2)///captura
                                            {
                                                if(t[l-1][c+1]=='x' && t[l-2][c+2]==' ')
                                                {
                                                    t[l-1][c+1]=' ';
                                                    t[l1][c1]='o';
                                                    t[l][c]=' ';
                                                    vez++;
                                                }
                                                else
                                                {
                                                    printf("\nMovimento invalido!!\n");
                                                    system("pause");
                                                }
                                            }
                                            else if(l1==l-2 && c1==c-2)///captura
                                            {
                                                if(t[l-1][c-1]=='x' && t[l-2][c-2]==' ')
                                                {
                                                    t[l1][c1]='o';
                                                    t[l][c]=' ';
                                                    t[l-1][c-1]=' ';
                                                    vez++;
                                                }
                                                else
                                                {
                                                    printf("\nMovimento invalido!!\n");
                                                    system("pause");
                                                }
                                            }
                                            else if(l1==l+2 && c1==c+2)///captura
                                            {
                                                if(t[l+1][c+1]=='x' && t[l+2][c+2]==' ')
                                                {
                                                    t[l1][c1]='o';
                                                    t[l][c]=' ';
                                                    t[l+1][c+1]=' ';
                                                    vez++;
                                                }
                                                else
                                                {
                                                    printf("\nMovimento invalido!!\n");
                                                    system("pause");
                                                }
                                            }
                                            else if(l1==l+2 && c1==c-2)///captura
                                            {
                                                if(t[l+1][c-1]=='x' && t[l+2][c-2]==' ')
                                                {
                                                    t[l1][c1]='o';
                                                    t[l][c]=' ';
                                                    t[l+1][c-1]=' ';
                                                    vez++;
                                                }
                                                else
                                                {
                                                    printf("\nMovimento invalido!!\n");
                                                    system("pause");
                                                }
                                            }
                                            else
                                            {
                                                printf("\nJogada invalida!!\n");
                                                system("pause");
                                            }
                                        }
                                        else
                                        {
                                            printf("\nCasa ja preenchida!!\n");
                                            system("pause");
                                        }
                                    }
                                }
                            }
                        }
                        tabuleiro(t);
                    }
                    while(contar(t,'x')!=0 && contar(t,'o')!=0);
                    if(contar(t,'x')==0)
                    {
                        fim=1;
                    }
                    else if(contar(t,'o')==0)
                    {
                        fim=1;
                    }
                }
                while(fim!=1);
                if(contar(t,'o')>contar(t,'x'))///o vence
                {
                    system("cls");
                    printf("\n\t\t..........GANHADOR O %dx%d...........\n\n\n", contar(t,'o'), contar(t,'x'));
                    system("pause");
                }
                else if(contar(t,'x')>contar(t,'o'))///x vence
                {
                    system("cls");
                    printf("\n\t\t..........GANHADOR X %dx%d...........\n\n\n", contar(t,'x'), contar(t,'o'));
                    system("pause");
                }
                else if(contar(t,'x')==contar(t,'o'))///empate
                {
                    system("cls");
                    printf("\n\t\t..........EMPATE!!! %dx%d...........\n\n\n", contar(t,'x'), contar(t,'o'));
                    system("pause");
                }
                j.placar1=contar(t,'x');
                j.placar2=contar(t,'o');
                gravaRecord(arq,j);
                fclose(arq);
            }
        }
        else if(op==2)
        {
            opcao2();
        }
        else if(op==3)
        {
            struct Jogador j;
            int vt=0;
            FILE *arq = fopen("arq.txt","r");
            if(arq == NULL)
            {
                system("cls");
                printf("\n\t\t  Placar:\n\n");
                printf("\t--------------------------\n");
                system("pause");
            }
            else
            {
                system("cls");
                printf("\n\t\t  Placar:\n\n");
                printf("\t--------------------------\n");
                do
                {
                    fscanf(arq, "%s.", j.nome);
                    printf("\t     %s\n", j.nome);
                    printf("\t--------------------------\n");
                }
                while(!feof(arq));
                system("pause");
                fclose(arq);
            }
        }
        else if(op==4)
        {
            opcao4();
        }
    }
    while(op!=4);
    return 0;
}
